jQuery(function(t){if("undefined"==typeof wcsatt_cart_params)return!1;var a=t(document);a.on("change",".wcsatt-options-cart [name^=convert_to_sub]",function(){var a=t(this),c=t("div.cart_totals"),e=t("table.shop_table.cart"),s=a.closest(".wcsatt-options-cart"),o=e.closest(".woocommerce"),r=c.find("input.wcsatt-add-cart-to-subscription-action-input"),n=a.val(),i=e.find('input[name="_wp_http_referer"]').val();o.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var _={security:wcsatt_cart_params.update_cart_option_nonce,subscription_scheme:n,add_to_subscription_checked:r.is(":checked")?"yes":"no",action:"wcsatt_update_cart_option"};t.post(wcsatt_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",_.action),_,function(r){if("success"===r.result){var n=t(t.parseHTML(r.html)),_=n.find("div.cart_totals"),p=n.find("table.shop_table.cart");i&&p.find('input[name="_wp_http_referer"]').val(i),p.find('input[name="update_cart"]').prop("disabled",!0),c.replaceWith(_),e.replaceWith(p),o.trigger("wcsatt_updated_cart")}else window.alert(wcsatt_cart_params.i18n_update_cart_sub_error),r.reset_to_scheme&&(a.is(":radio")?s.find('input[value="'+r.reset_to_scheme+'"]').prop("checked",!0):a.val(r.reset_to_scheme));o.unblock()})}),a.on("change",".wcsatt-add-cart-to-subscription-action-input",function(){var a=t("div.cart_totals"),c=t(this),e=c.closest(".wcsatt-add-cart-to-subscription-wrapper"),s=e.find(".wcsatt-add-cart-to-subscription-options"),o=a.find(".wcsatt-options-cart [name^=convert_to_sub]"),r=c.is(":checked"),n=o.val();if(r){e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var i={subscription_scheme:n,add_to_subscription_checked:c.is(":checked")?"yes":"no",action:"wcsatt_load_subscriptions_matching_cart"};t.post(wcsatt_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",i.action),i,function(t){"success"===t.result?(s.html(t.html),e.removeClass("closed"),e.addClass("open"),s.slideDown(200)):window.alert(wcsatt_cart_params.i18n_subs_load_error),e.unblock()})}else e.removeClass("open"),e.addClass("closed"),s.slideUp(200)})});